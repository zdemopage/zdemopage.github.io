<!DOCTYPE html>
<html>
  <head>
    <title>Upload to S3</title>
    <meta charset="utf-8" />
    <script src="https://sdk.amazonaws.com/js/aws-sdk-3.59.0.min.js"></script>
  </head>
  <body>
    <form>
      <label for="region">Region:</label>
      <select id="region" name="region">
			  <option value="us-east-1">us-east-1</option>
  			<option value="us-east-2">us-east-2</option>
	  		<option value="us-west-1">us-west-1</option>
	  		<option value="us-west-2">us-west-2</option>
		  	<option value="ap-south-1">ap-south-1</option>
		  	<option value="ap-northeast-1">ap-northeast-1</option>
		  	<option value="ap-northeast-2">ap-northeast-2</option>
		  	<option value="ap-southeast-1">ap-southeast-1</option>
		  	<option value="ap-southeast-2">ap-southeast-2</option>
		  	<option value="ca-central-1">ca-central-1</option>
		  	<option value="eu-central-1">eu-central-1</option>
		  	<option value="eu-west-1">eu-west-1</option>
		  	<option value="eu-west-2">eu-west-2</option>
		  	<option value="eu-west-3">eu-west-3</option>
		  	<option value="sa-east-1">sa-east-1</option>
      </select>
      <br />
      <br />
      <label for="bucket">Bucket Name:</label>
      <input type="text" id="bucket" name="bucket" placeholder="Enter S3 Bucket Name" />
      <br />
      <br />
      <label for="file">File:</label>
      <input type="file" id="file" name="file" />
      <br />
      <br />
      <button type="button" onclick="uploadFile()">Upload File</button>
      <div id="status"></div>
    </form>

    <script>
      // Set the public bucket URL
      const publicBucketUrl = "https://s3.amazonaws.com/public-bucket/";

      // Initialize the S3 client
      const s3 = new AWS.S3({
        apiVersion: "2006-03-01",
      });

      // Upload the file to S3
      function uploadFile() {
        // Get the selected region and bucket name
        const region = document.getElementById("region").value;
        const bucket = document.getElementById("bucket").value;

        // Get the file to upload
        const file = document.getElementById("file").files[0];

        // Set the S3 upload parameters
        const params = {
          Bucket: bucket,
          Key: file.name,
          Body: file,
        };

        // Show a loading message
        const statusDiv = document.getElementById("status");
        statusDiv.innerHTML = "Uploading file...";

        // Upload the file to S3
        s3.upload(params, (err, data) => {
          if (err) {
            // Show an error message
            statusDiv.innerHTML = "Failed to upload file: " + err.message;
          } else {
            // Check if the file was uploaded successfully
            const fileUrl = publicBucketUrl + bucket + "/" + file.name;
            fetch(fileUrl, { method: "HEAD" }).then((response) => {
              if (response.ok) {
                // Show a success message
                statusDiv.innerHTML = "File uploaded successfully!";
              } else {
                // Show an error message
                statusDiv.innerHTML = "Failed to upload file.";
              }
            });
          }
        });
      }
    </script>
  </body>
</html>
