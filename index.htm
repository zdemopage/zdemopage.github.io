<!DOCTYPE html>
<html>
  <head>
    <title>Upload file to S3</title>
  </head>
  <body>
    <h1>Upload a file to your S3 bucket</h1>
    <form id="upload-form">
      <label for="aws-region">AWS region:</label>
      <input type="text" id="aws-region" name="aws-region"><br><br>
      
      <label for="bucket-name">S3 bucket name:</label>
      <input type="text" id="bucket-name" name="bucket-name"><br><br>
      
      <label for="file">Select file to upload:</label>
      <input type="file" id="file" name="file"><br><br>
      
      <button type="button" id="upload-btn">Upload file</button>
      <button type="button" id="send-btn">Send file</button>
    </form>

    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.932.0.min.js"></script>
    <script>
      // Initialize the AWS SDK
      AWS.config.region = '';

      const s3 = new AWS.S3({ apiVersion: '2006-03-01' });

      // Handle the click event of the upload button
      document.getElementById('upload-btn').addEventListener('click', () => {
        const fileInput = document.getElementById('file');
        const file = fileInput.files[0];

        if (!file) {
          alert('Please select a file to upload');
          return;
        }

        const bucketName = document.getElementById('bucket-name').value;

        if (!bucketName) {
          alert('Please enter the S3 bucket name');
          return;
        }

        const params = {
          Bucket: bucketName,
          Key: file.name,
          Body: file,
          ACL: 'public-read'
        };

        s3.upload(params, (err, data) => {
          if (err) {
            console.log('Error uploading file: ', err);
          } else {
            console.log('File uploaded successfully. File location: ', data.Location);
          }
        });
      });

      // Handle the click event of the send button
      document.getElementById('send-btn').addEventListener('click', () => {
        const formData = new FormData(document.getElementById('upload-form'));
        const region = formData.get('aws-region');
        const bucketName = formData.get('bucket-name');
        const file = formData.get('file');

        AWS.config.update({ region });
        const s3 = new AWS.S3({ apiVersion: '2006-03-01' });

        const params = {
          Bucket: bucketName,
          Key: file.name,
          Body: file,
          ACL: 'public-read'
        };

        s3.upload(params, (err, data) => {
          if (err) {
            console.log('Error uploading file: ', err);
          } else {
            console.log('File uploaded successfully. File location: ', data.Location);
          }
        });
      });
    </script>
  </body>
</html>
